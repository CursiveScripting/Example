{"version":3,"sources":["saving.ts","App.tsx","IntegerWorkspace.ts","index.tsx"],"names":["loadProcesses","a","saved","sessionStorage","getItem","JSON","parse","saveProcesses","processData","processJson","stringify","setItem","workspace","add","subtract","multiply","compare","modifyNumber","integer","FixedType","s","parseInt","undefined","RegExp","input1","TypedParameter","input2","output","SystemProcess","inputs","value1","get","value2","outputs","ValueSet","set","Promise","resolve","returnPath","in1","in2","run","this","result","input","RequiredProcess","start","types","systemProcesses","requiredProcesses","Workspace","customTools","prompt","iconBackground","unsavedConfirmation","action","loadProcessData","loadUserProcesses","saveProcessData","data","window","number","alert","ReactDOM","render","className","loadWorkspace","saveWorkspace","document","getElementById"],"mappings":"0LAEO,SAAeA,IAAtB,+B,4CAAO,4BAAAC,EAAA,6DACCC,EAAQC,eAAeC,QAAQ,SADhC,kBAGY,OAAVF,EACD,KACAG,KAAKC,MAAMJ,IALZ,4C,sBAQA,SAAeK,EAAtB,kC,4CAAO,WAA6BC,GAA7B,eAAAP,EAAA,sDACCQ,EAAcJ,KAAKK,UAAUF,GACnCL,eAAeQ,QAAQ,QAASF,GAF3B,4C,kFCJDG,EAAY,ICJlB,YACE,aAAe,IAAD,uBACZ,+CA0MKC,SA3MO,IA4MPC,cA5MO,IA6MPC,cA7MO,IA8MPC,aA9MO,IA+MPC,kBA/MO,EAEZ,IASIJ,EAyCAC,EAlDEI,EAAU,IAAIC,YAClB,UACA,WACA,SAAAC,GAAC,OAAIC,SAASD,UACdE,OACAA,EACA,IAAIC,OAAO,WAMLC,EAAS,IAAIC,iBAAuB,UAAWP,GAC/CQ,EAAS,IAAID,iBAAuB,UAAWP,GAE/CS,EAAS,IAAIF,iBAAuB,SAAUP,GAEpDL,EAAM,IAAIe,gBACR,MACA,oBACA,MACA,SAAAC,GACE,IAAMC,EAASD,EAAOE,IAAIP,GACpBQ,EAASH,EAAOE,IAAIL,GAEpBO,EAAU,IAAIC,WAGpB,OAFAD,EAAQE,IAAIR,EAAQG,EAASE,GAEtBI,QAAQC,QAAQ,CACrBC,WAAY,KACZL,cAGJ,CAACT,EAAQE,GACT,CAACC,GACD,IAGF,EAAKd,IAAL,uCAAW,WAAO0B,EAAKC,GAAZ,mBAAAvC,EAAA,6DACH4B,EAAS,IAAIK,YAEZC,IAAIX,EAAQe,GACnBV,EAAOM,IAAIT,EAAQc,GAJV,SAMiB3B,EAAI4B,IAAIZ,GANzB,uBAMDI,EANC,EAMDA,QANC,kBAQFG,QAAQC,QAAQJ,EAASF,IAAIJ,KAR3B,2CAAX,oCAAAe,KAAA,eAeA,IAsCE3B,EAtCIS,EAAS,IAAIC,iBAAuB,UAAWP,GAC/CQ,EAAS,IAAID,iBAAuB,UAAWP,GAE/CS,EAAS,IAAIF,iBAAuB,SAAUP,GAEpDJ,EAAW,IAAIc,gBACb,WACA,qCACA,MACA,SAAAC,GACE,IAAMC,EAASD,EAAOE,IAAIP,GACpBQ,EAASH,EAAOE,IAAIL,GAEpBO,EAAU,IAAIC,WAGpB,OAFAD,EAAQE,IAAIR,EAAQG,EAASE,GAEtBI,QAAQC,QAAQ,CACrBC,WAAY,KACZL,cAGJ,CAACT,EAAQE,GACT,CAACC,GACD,IAGF,EAAKb,SAAL,uCAAgB,WAAOyB,EAAKC,GAAZ,mBAAAvC,EAAA,6DACR4B,EAAS,IAAIK,YAEZC,IAAIX,EAAQe,GACnBV,EAAOM,IAAIT,EAAQc,GAJL,SAMY1B,EAAS2B,IAAIZ,GANzB,uBAMNI,EANM,EAMNA,QANM,kBAQPG,QAAQC,QAAQJ,EAASF,IAAIJ,KARtB,2CAAhB,oCAAAe,KAAA,eAeA,IAsCE1B,EAtCIQ,EAAS,IAAIC,iBAAuB,UAAWP,GAC/CQ,EAAS,IAAID,iBAAuB,UAAWP,GAE/CS,EAAS,IAAIF,iBAAuB,SAAUP,GAEpDH,EAAW,IAAIa,gBACb,WACA,0BACA,MACA,SAAAC,GACE,IAAMC,EAASD,EAAOE,IAAIP,GACpBQ,EAASH,EAAOE,IAAIL,GAEpBO,EAAU,IAAIC,WAGpB,OAFAD,EAAQE,IAAIR,EAAQG,EAASE,GAEtBI,QAAQC,QAAQ,CACrBC,WAAY,KACZL,cAGJ,CAACT,EAAQE,GACT,CAACC,GACD,IAGF,EAAKZ,SAAL,uCAAgB,WAAOwB,EAAKC,GAAZ,mBAAAvC,EAAA,6DACR4B,EAAS,IAAIK,YAEZC,IAAIX,EAAQe,GACnBV,EAAOM,IAAIT,EAAQc,GAJL,SAMYzB,EAAS0B,IAAIZ,GANzB,uBAMNI,EANM,EAMNA,QANM,kBAQPG,QAAQC,QAAQJ,EAASF,IAAIJ,KARtB,2CAAhB,oCAAAe,KAAA,eAeA,IAmCEzB,EAnCIO,EAAS,IAAIC,iBAAuB,UAAWP,GAC/CQ,EAAS,IAAID,iBAAuB,UAAWP,GAErDF,EAAU,IAAIY,gBACZ,UACA,uBACA,MACA,SAAAC,GACE,IAAMC,EAASD,EAAOE,IAAIP,GACpBQ,EAASH,EAAOE,IAAIL,GAEpBiB,EAASb,EAASE,EAAS,OAASF,EAASE,EAAS,UAAY,QAExE,OAAOI,QAAQC,QAAQ,CACrBC,WAAYK,EACZV,QAAS,SAGb,CAACT,EAAQE,GACT,GACA,CAAC,OAAQ,UAAW,UAGtB,EAAKV,QAAL,uCAAe,WAAOuB,EAAKC,GAAZ,mBAAAvC,EAAA,6DACP4B,EAAS,IAAIK,YAEZC,IAAIX,EAAQe,GACnBV,EAAOM,IAAIT,EAAQc,GAJN,SAMgBxB,EAAQyB,IAAIZ,GAN5B,uBAMLS,EANK,EAMLA,WANK,kBAQNF,QAAQC,QAAQC,IARV,2CAAf,oCAAAI,KAAA,eAeA,IAAME,EAAQ,IAAInB,iBAAuB,QAASP,GAC5CS,EAAS,IAAIF,iBAAuB,SAAUP,GAhL1C,OAkLVD,EAAe,IAAI4B,kBACjB,gBACA,wCACA,KACA,CAACD,GACD,CAACjB,GACD,IAGF,EAAKV,aAAL,uCAAoB,WAAMsB,GAAN,mBAAAtC,EAAA,6DACZ4B,EAAS,IAAIK,YAEZC,IAAIS,EAAOL,GAHA,SAKQtB,EAAa6B,MAAMjB,GAL3B,uBAKVI,EALU,EAKVA,QALU,kBAOXG,QAAQC,QAAQJ,EAASF,IAAIJ,KAPlB,2CAApB,kCAAAe,KAAA,eAWF,EAAKK,MAAQ,CAAC7B,GACd,EAAK8B,gBAAkB,CAACnC,EAAKC,EAAUC,EAAUC,GACjD,EAAKiC,kBAAoB,CAAChC,GAxMd,EADhB,2BAAsCiC,cDMhCC,EAA6B,CAAC,CAChCC,OAAQ,cACRC,eAAe,2SACfC,oBAAqB,oDACrBC,O,sDAaWC,I,2EAAf,4BAAAvD,EAAA,sEAC8BD,IAD9B,cAEwB,QADdQ,EADV,SAGuBI,EAAU6C,kBAAkBjD,GAAa,GAHhE,kBAKWA,GALX,4C,+BAQekD,E,8EAAf,WAA+BC,GAA/B,SAAA1D,EAAA,sEACUM,EAAcoD,GADxB,OAEI/C,EAAU6C,kBAAkBE,GAAM,GAFtC,4C,kEAKA,gCAAA1D,EAAA,yDAGkB,QAFR2C,EAAQgB,OAAOR,OAAO,0BAA2B,MAD3D,wDAOUS,EAASxC,SAASuB,GAP5B,SASyBhC,EAAUK,aAAa4C,GAThD,OASUlB,EATV,OAWImB,MAAM,6BAAD,OAA8BnB,IAXvC,4C,sBEjCAoB,IAASC,OAAO,mBFUG,kBACf,gBAAC,IAAD,CACIC,UAAU,aACVC,cAAa,sBAAE,sBAAAjE,EAAA,+EAAYW,EAAUuD,iBAAtB,2CACfnE,cAAewD,EACfjD,cAAemD,EACfP,YAAaA,MEhBL,MAASiB,SAASC,eAAe,U","file":"static/js/main.7d51ca74.chunk.js","sourcesContent":["import { IUserProcessData } from 'cursive-web-ui/lib';\r\n\r\nexport async function loadProcesses() {\r\n  const saved = sessionStorage.getItem('saved');\r\n  \r\n  return saved === null\r\n      ? null\r\n      : JSON.parse(saved) as IUserProcessData[];\r\n}\r\n\r\nexport async function saveProcesses(processData: IUserProcessData[]) {\r\n  const processJson = JSON.stringify(processData);\r\n  sessionStorage.setItem('saved', processJson);\r\n}","import * as React from 'react';\r\nimport './App.css';\r\nimport { loadProcesses, saveProcesses } from './saving';\r\nimport CursiveUI, { ICustomTool, IUserProcessData } from 'cursive-web-ui/lib';\r\nimport { IntegerWorkspace } from './IntegerWorkspace';\r\n\r\nconst workspace = new IntegerWorkspace();\r\n\r\nconst customTools: ICustomTool[] = [{\r\n    prompt: 'Run Process',\r\n    iconBackground: `url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-play'><polygon points='5 3 19 12 5 21 5 3'></polygon></svg>\")`,\r\n    unsavedConfirmation: 'You have unsaved changes. Run last saved version?',\r\n    action: runProcess,\r\n}];\r\n\r\nexport const App = () => (\r\n    <CursiveUI\r\n        className=\"fullScreen\"\r\n        loadWorkspace={async () => workspace.saveWorkspace()}\r\n        loadProcesses={loadProcessData}\r\n        saveProcesses={saveProcessData}\r\n        customTools={customTools}\r\n    />\r\n);\r\n\r\nasync function loadProcessData() {\r\n    const processData = await loadProcesses();\r\n    if (processData !== null) {\r\n        const errors = workspace.loadUserProcesses(processData, true)\r\n    }\r\n    return processData;\r\n}\r\n\r\nasync function saveProcessData(data: IUserProcessData[]) {\r\n    await saveProcesses(data);\r\n    workspace.loadUserProcesses(data, true);\r\n}\r\n\r\nasync function runProcess() {\r\n    const input = window.prompt('Provide an input number', '1');\r\n\r\n    if (input === null) {\r\n        return;\r\n    }\r\n\r\n    const number = parseInt(input);\r\n    \r\n    const result = await workspace.modifyNumber(number);\r\n\r\n    alert(`Process complete! Result: ${result}`);\r\n}","import { Workspace, FixedType, SystemProcess, TypedParameter, ValueSet, RequiredProcess } from 'cursive-runtime';\r\n\r\nexport class IntegerWorkspace extends Workspace {\r\n  constructor() {\r\n    super();\r\n    const integer = new FixedType<number>(\r\n      'integer',\r\n      '#00cc00',\r\n      s => parseInt(s),\r\n      undefined,\r\n      undefined,\r\n      new RegExp('[0-9]+'),\r\n    );\r\n\r\n    let add: SystemProcess;\r\n\r\n    {\r\n      const input1 = new TypedParameter<number>('value 1', integer);\r\n      const input2 = new TypedParameter<number>('value 2', integer);\r\n\r\n      const output = new TypedParameter<number>('result', integer);\r\n\r\n      add = new SystemProcess(\r\n        'Add',\r\n        'Adds two integers',\r\n        null,\r\n        inputs => {\r\n          const value1 = inputs.get(input1);\r\n          const value2 = inputs.get(input2);\r\n\r\n          const outputs = new ValueSet();\r\n          outputs.set(output, value1 + value2);\r\n\r\n          return Promise.resolve({\r\n            returnPath: null,\r\n            outputs,\r\n          });\r\n        },\r\n        [input1, input2],\r\n        [output],\r\n        [],\r\n      );\r\n\r\n      this.add = async (in1, in2) => {\r\n        const inputs = new ValueSet();\r\n\r\n        inputs.set(input1, in1);\r\n        inputs.set(input2, in2);\r\n\r\n        const { outputs } = await add.run(inputs);\r\n\r\n        return Promise.resolve(outputs!.get(output));\r\n      };\r\n    }\r\n\r\n    let subtract: SystemProcess;\r\n\r\n    {\r\n      const input1 = new TypedParameter<number>('value 1', integer);\r\n      const input2 = new TypedParameter<number>('value 2', integer);\r\n\r\n      const output = new TypedParameter<number>('result', integer);\r\n\r\n      subtract = new SystemProcess(\r\n        'Subtract',\r\n        'Subtracts one integer from another',\r\n        null,\r\n        inputs => {\r\n          const value1 = inputs.get(input1);\r\n          const value2 = inputs.get(input2);\r\n\r\n          const outputs = new ValueSet();\r\n          outputs.set(output, value1 - value2);\r\n\r\n          return Promise.resolve({\r\n            returnPath: null,\r\n            outputs,\r\n          });\r\n        },\r\n        [input1, input2],\r\n        [output],\r\n        [],\r\n      );\r\n\r\n      this.subtract = async (in1, in2) => {\r\n        const inputs = new ValueSet();\r\n\r\n        inputs.set(input1, in1);\r\n        inputs.set(input2, in2);\r\n\r\n        const { outputs } = await subtract.run(inputs);\r\n\r\n        return Promise.resolve(outputs!.get(output));\r\n      };\r\n    }\r\n\r\n    let multiply: SystemProcess;\r\n\r\n    {\r\n      const input1 = new TypedParameter<number>('value 1', integer);\r\n      const input2 = new TypedParameter<number>('value 2', integer);\r\n\r\n      const output = new TypedParameter<number>('result', integer);\r\n\r\n      multiply = new SystemProcess(\r\n        'Multiply',\r\n        'Multiplies two integers',\r\n        null,\r\n        inputs => {\r\n          const value1 = inputs.get(input1);\r\n          const value2 = inputs.get(input2);\r\n\r\n          const outputs = new ValueSet();\r\n          outputs.set(output, value1 * value2);\r\n\r\n          return Promise.resolve({\r\n            returnPath: null,\r\n            outputs,\r\n          });\r\n        },\r\n        [input1, input2],\r\n        [output],\r\n        [],\r\n      );\r\n\r\n      this.multiply = async (in1, in2) => {\r\n        const inputs = new ValueSet();\r\n\r\n        inputs.set(input1, in1);\r\n        inputs.set(input2, in2);\r\n\r\n        const { outputs } = await multiply.run(inputs);\r\n\r\n        return Promise.resolve(outputs!.get(output));\r\n      };\r\n    }\r\n\r\n    let compare: SystemProcess;\r\n\r\n    {\r\n      const input1 = new TypedParameter<number>('value 1', integer);\r\n      const input2 = new TypedParameter<number>('value 2', integer);\r\n\r\n      compare = new SystemProcess(\r\n        'Compare',\r\n        'Compare two integers',\r\n        null,\r\n        inputs => {\r\n          const value1 = inputs.get(input1);\r\n          const value2 = inputs.get(input2);\r\n\r\n          const result = value1 < value2 ? 'less' : value1 > value2 ? 'greater' : 'equal';\r\n\r\n          return Promise.resolve({\r\n            returnPath: result,\r\n            outputs: null,\r\n          });\r\n        },\r\n        [input1, input2],\r\n        [],\r\n        ['less', 'greater', 'equal'],\r\n      );\r\n\r\n      this.compare = async (in1, in2) => {\r\n        const inputs = new ValueSet();\r\n\r\n        inputs.set(input1, in1);\r\n        inputs.set(input2, in2);\r\n\r\n        const { returnPath } = await compare.run(inputs);\r\n\r\n        return Promise.resolve(returnPath as 'less' | 'greater' | 'equal');\r\n      };\r\n    }\r\n\r\n    let modifyNumber: RequiredProcess;\r\n\r\n    {\r\n      const input = new TypedParameter<number>('value', integer);\r\n      const output = new TypedParameter<number>('result', integer);\r\n\r\n      modifyNumber = new RequiredProcess(\r\n        'Modify number',\r\n        'Perform some operation(s) on a number',\r\n        null,\r\n        [input],\r\n        [output],\r\n        [],\r\n      );\r\n\r\n      this.modifyNumber = async in1 => {\r\n        const inputs = new ValueSet();\r\n\r\n        inputs.set(input, in1);\r\n\r\n        const { outputs } = await modifyNumber.start(inputs);\r\n\r\n        return Promise.resolve(outputs!.get(output));\r\n      };\r\n    }\r\n\r\n    this.types = [integer];\r\n    this.systemProcesses = [add, subtract, multiply, compare];\r\n    this.requiredProcesses = [modifyNumber];\r\n  }\r\n\r\n  public add: (in1: number, in2: number) => Promise<number>;\r\n  public subtract: (in1: number, in2: number) => Promise<number>;\r\n  public multiply: (in1: number, in2: number) => Promise<number>;\r\n  public compare: (in1: number, in2: number) => Promise<'less' | 'greater' | 'equal'>;\r\n  public modifyNumber: (in1: number) => Promise<number>;\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { App } from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}